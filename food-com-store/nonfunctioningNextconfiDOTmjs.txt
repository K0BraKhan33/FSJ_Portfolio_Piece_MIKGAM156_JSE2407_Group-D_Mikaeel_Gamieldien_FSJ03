// next.config.mjs

import withPWA from 'next-pwa'; // Use ES import

const nextConfig = withPWA({
    reactStrictMode: true,
    pwa: {
        dest: 'public', // Updated for the `next-pwa` configuration
        register: true,
        skipWaiting: true,
        disable: process.env.NODE_ENV === 'development',
    },
    async redirects() {
        return [
            {
                source: '/',
                destination: '/product/productsPage',
                permanent: true, // Use `true` for a permanent redirect
            },
        ];
    },
    images: {
        domains: ['cdn.dummyjson.com'], // Add the allowed hostname here
    },
    // telemetry: false, // Uncomment to disable telemetry
});

// Export the configuration
export default nextConfig;


// In your next.config.mjs (make sure you have next-pwa configured)

const withPWA = require('next-pwa');
module.exports = withPWA({
    pwa: {
        dest: 'public',
        runtimeCaching: [
            {
                urlPattern: /\.(?:png|jpg|jpeg|svg|gif|webp)$/,
                handler: 'CacheFirst',
                options: {
                    cacheName: 'images-cache',
                    expiration: {
                        maxEntries: 50,
                        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 Days
                    },
                },
            },
        ],
    },
});
